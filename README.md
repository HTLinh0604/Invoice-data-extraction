# üß† AI Invoice Recognition and Storage Automation  
*(·ª®ng d·ª•ng Tr√≠ Tu·ªá Nh√¢n T·∫°o trong Nh·∫≠n Di·ªán v√† T·ª± ƒê·ªông H√≥a L∆∞u Tr·ªØ H√≥a ƒê∆°n)*  

![Python](https://img.shields.io/badge/Python-3.9%2B-blue?logo=python&logoColor=white)  
![Flask](https://img.shields.io/badge/Flask-Web%20App-black?logo=flask)  
![OpenCV](https://img.shields.io/badge/OpenCV-Image%20Processing-blue?logo=opencv)  
![Tesseract](https://img.shields.io/badge/Tesseract-OCR-lightgrey?logo=tesseract)  

This project builds an automated system to extract structured information from retail invoices using OCR technology, helping businesses optimize financial and accounting workflows.  
*(ƒê·ªì √°n n√†y x√¢y d·ª±ng m·ªôt h·ªá th·ªëng t·ª± ƒë·ªông tr√≠ch xu·∫•t th√¥ng tin c√≥ c·∫•u tr√∫c t·ª´ h√≥a ƒë∆°n b√°n l·∫ª b·∫±ng c√¥ng ngh·ªá OCR, gi√∫p doanh nghi·ªáp t·ªëi ∆∞u h√≥a quy tr√¨nh t√†i ch√≠nh v√† k·∫ø to√°n.)*  

---

## üìã Table of Contents *(M·ª•c l·ª•c)*  

- [üéØ Objectives & Significance *(M·ª•c ti√™u & √ù nghƒ©a)*](#-objectives--significance-m·ª•c-ti√™u--√Ω-nghƒ©a)  
- [üõ†Ô∏è Technologies Used *(C√¥ng ngh·ªá s·ª≠ d·ª•ng)*](#-technologies-used-c√¥ng-ngh·ªá-s·ª≠-d·ª•ng)  
- [üìä Dataset *(D·ªØ li·ªáu)*](#-dataset-d·ªØ-li·ªáu)  
- [‚öôÔ∏è System Workflow *(Quy tr√¨nh ho·∫°t ƒë·ªông c·ªßa h·ªá th·ªëng)*](#-system-workflow-quy-tr√¨nh-ho·∫°t-ƒë·ªông-c·ªßa-h·ªá-th·ªëng)  
- [üìà Experimental Results *(K·∫øt qu·∫£ th·ª±c nghi·ªám)*](#-experimental-results-k·∫øt-qu·∫£-th·ª±c-nghi·ªám)  
- [üñ•Ô∏è User Interface *(Giao di·ªán h·ªá th·ªëng)*](#-user-interface-giao-di·ªán-h·ªá-th·ªëng)  
- [üöÄ Conclusion & Future Work *(K·∫øt lu·∫≠n & H∆∞·ªõng ph√°t tri·ªÉn)*](#-conclusion--future-work-k·∫øt-lu·∫≠n--h∆∞·ªõng-ph√°t-tri·ªÉn)  
- [‚öôÔ∏è Installation *(C√†i ƒë·∫∑t)*](#Ô∏è-installation-c√†i-ƒë·∫∑t)  
- [üë• Project Information *(Th√¥ng tin ƒê·ªì √°n)*](#-project-information-th√¥ng-tin-ƒë·ªì-√°n)  

---

## üéØ Objectives & Significance *(M·ª•c ti√™u & √ù nghƒ©a)*  

### Objectives *(M·ª•c ti√™u)*  
- **General:** Develop a complete system enabling automatic extraction, analysis, and management of invoice data using OCR and machine learning.  
  *(T·ªïng quan: X√¢y d·ª±ng m·ªôt h·ªá th·ªëng ho√†n ch·ªânh gi√∫p doanh nghi·ªáp tr√≠ch xu·∫•t, ph√¢n t√≠ch v√† qu·∫£n l√Ω d·ªØ li·ªáu h√≥a ƒë∆°n hi·ªáu qu·∫£ b·∫±ng OCR v√† h·ªçc m√°y.)*  

- **Specific:** Apply **Tesseract OCR** combined with **OpenCV** image processing techniques to extract invoice information with optimized speed and accuracy.  
  *(C·ª• th·ªÉ: √Åp d·ª•ng OCR (Tesseract) k·∫øt h·ª£p c√°c k·ªπ thu·∫≠t x·ª≠ l√Ω ·∫£nh (OpenCV) ƒë·ªÉ tr√≠ch xu·∫•t d·ªØ li·ªáu t·ª´ ·∫£nh h√≥a ƒë∆°n v·ªõi ƒë·ªô ch√≠nh x√°c v√† t·ªëc ƒë·ªô t·ªëi ∆∞u.)*  

### Practical Significance *(√ù nghƒ©a th·ª±c ti·ªÖn)*  
The system serves as an intelligent automation tool that helps businesses:  
*(H·ªá th·ªëng ho·∫°t ƒë·ªông nh∆∞ m·ªôt c√¥ng c·ª• t·ª± ƒë·ªông th√¥ng minh gi√∫p doanh nghi·ªáp:)*  
- Save time and reduce manual data entry effort. *(Ti·∫øt ki·ªám th·ªùi gian v√† nh√¢n l·ª±c nh·∫≠p li·ªáu th·ªß c√¥ng.)*  
- Minimize financial data errors. *(Gi·∫£m thi·ªÉu sai s√≥t trong qu√° tr√¨nh x·ª≠ l√Ω d·ªØ li·ªáu t√†i ch√≠nh.)*  
- Optimize invoice archiving and retrieval. *(T·ªëi ∆∞u h√≥a quy tr√¨nh l∆∞u tr·ªØ v√† tra c·ª©u h√≥a ƒë∆°n.)*  
- Provide clean structured data for analytics and decision-making. *(Cung c·∫•p d·ªØ li·ªáu s·∫°ch ph·ª•c v·ª• ph√¢n t√≠ch v√† ra quy·∫øt ƒë·ªãnh chi·∫øn l∆∞·ª£c.)*  

---

## üõ†Ô∏è Technologies Used *(C√¥ng ngh·ªá s·ª≠ d·ª•ng)*  

| Category | Tools & Libraries |
|-----------|------------------|
| **Programming Language** | Python 3.9 |
| **Image Processing** | OpenCV |
| **Optical Character Recognition (OCR)** | Tesseract (language: `vie`) |
| **Information Extraction** | Regex (Regular Expressions) |
| **Web Framework** | Flask |
| **Supporting Libraries** | Pandas, NumPy |

*(B·∫£ng tr√™n li·ªát k√™ c√°c c√¥ng ngh·ªá v√† th∆∞ vi·ªán ch√≠nh ƒë∆∞·ª£c s·ª≠ d·ª•ng trong h·ªá th·ªëng, bao g·ªìm Python, OpenCV, Tesseract OCR, v√† Flask cho giao di·ªán web demo.)*  

---

## üìä Dataset *(D·ªØ li·ªáu)*  

- **Source:** Roboflow Platform  
- **Objects:** 28 invoice images from *B√°ch H√≥a Xanh* retail stores  
- **Format:** JPG, PNG  
- **Language:** Vietnamese  
- **Quality:** Mixed ‚Äî clear, blurred, skewed, and low-light images  

**Extracted Fields (10 key attributes):**  
1. Store Name *(T√™n c·ª≠a h√†ng)*  
2. Address *(ƒê·ªãa ch·ªâ)*  
3. Date *(Ng√†y giao d·ªãch)*  
4. Employee *(Nh√¢n vi√™n)*  
5. Bill No *(S·ªë h√≥a ƒë∆°n)*  
6. Products *(Danh s√°ch s·∫£n ph·∫©m)*  
7. Total Products *(T·ªïng ti·ªÅn s·∫£n ph·∫©m)*  
8. Paid *(S·ªë ti·ªÅn thanh to√°n)*  
9. Change *(Ti·ªÅn th·ªëi)*  
10. Discount *(Gi·∫£m gi√°)*  

---

## ‚öôÔ∏è System Workflow *(Quy tr√¨nh ho·∫°t ƒë·ªông c·ªßa h·ªá th·ªëng)*  

The system processes invoice images through three main stages:  
*(H·ªá th·ªëng x·ª≠ l√Ω ·∫£nh h√≥a ƒë∆°n qua ba giai ƒëo·∫°n ch√≠nh:)*  

### 1. Image Preprocessing *(Ti·ªÅn x·ª≠ l√Ω ·∫£nh ‚Äì OpenCV)*  
The input image undergoes several enhancement steps to optimize OCR performance:  
*(·∫¢nh ƒë·∫ßu v√†o ƒë∆∞·ª£c x·ª≠ l√Ω qua nhi·ªÅu b∆∞·ªõc ƒë·ªÉ t·ªëi ∆∞u h√≥a kh·∫£ nƒÉng nh·∫≠n di·ªán OCR:)*  

1. Convert to grayscale *(Chuy·ªÉn ·∫£nh sang thang x√°m)*  
2. Deskew image *(Ch·ªânh l·∫°i g√≥c nghi√™ng)*  
3. Remove background noise *(Kh·ª≠ nhi·ªÖu n·ªÅn)*  
4. Apply Otsu Thresholding *(Ng∆∞·ª°ng h√≥a nh·ªã ph√¢n Otsu)*  
5. Morphological operations *(X·ª≠ l√Ω h√¨nh th√°i h·ªçc)*  
6. Resize for better OCR accuracy *(Ph√≥ng to ·∫£nh ƒë·ªÉ c·∫£i thi·ªán ƒë·ªô ch√≠nh x√°c OCR)*  

---

### 2. OCR Strategy *(Chi·∫øn l∆∞·ª£c OCR ‚Äì Tesseract)*  
The system applies a **multi-stage fallback strategy** to maximize recognition accuracy.  
*(H·ªá th·ªëng √°p d·ª•ng chi·∫øn l∆∞·ª£c OCR nhi·ªÅu t·∫ßng ƒë·ªÉ t·ªëi ƒëa h√≥a ƒë·ªô ch√≠nh x√°c nh·∫≠n di·ªán.)*  

1. **Full Image OCR:** Run Tesseract on the entire preprocessed image.  
2. **Quality Check:** Evaluate missing fields.  
3. **Fallback Strategy:** If more than 3 key fields are missing, the system switches to segment-based OCR (cropping the image into overlapping slices and merging results).  

*(H·ªá th·ªëng ch·∫°y Tesseract tr√™n to√†n ·∫£nh, sau ƒë√≥ ki·ªÉm tra s·ªë tr∆∞·ªùng b·ªã thi·∫øu. N·∫øu v∆∞·ª£t qu√° 3, chuy·ªÉn sang ch·∫ø ƒë·ªô nh·∫≠n di·ªán t·ª´ng v√πng ·∫£nh ch·ªìng l·∫•n ƒë·ªÉ tƒÉng ƒë·ªô ch√≠nh x√°c.)*  

---

### 3. Information Extraction *(Tr√≠ch xu·∫•t th√¥ng tin ‚Äì Regex)*  
Extract structured invoice data using **regular expressions** designed specifically for *B√°ch H√≥a Xanh* receipts.  
*(S·ª≠ d·ª•ng c√°c m·∫´u bi·ªÉu th·ª©c ch√≠nh quy ƒë∆∞·ª£c thi·∫øt k·∫ø ri√™ng cho h√≥a ƒë∆°n B√°ch H√≥a Xanh ƒë·ªÉ tr√≠ch xu·∫•t v√† ƒë·ªãnh d·∫°ng l·∫°i th√¥ng tin c√≥ c·∫•u tr√∫c.)*  

---

## üìà Experimental Results *(K·∫øt qu·∫£ th·ª±c nghi·ªám)*  

Performance on 28 real invoice images:  
*(Hi·ªáu su·∫•t ƒë∆∞·ª£c ƒë√°nh gi√° tr√™n 28 ·∫£nh h√≥a ƒë∆°n th·ª±c t·∫ø:)*  

| Evaluation Result | Image Count | Rate | Description |
|:------------------|:------------:|:----:|:-------------|
| **Good / Fair** | 13 / 28 | 46.5% | Accurate recognition (70‚Äì85%) |
| **Average / Poor** | 10 / 28 | 35.7% | Partial recognition, inconsistent accuracy |
| **Failed** | 5 / 28 | 17.9% | No data recognized (blurry or noisy images) |

> ‚ö†Ô∏è **Critical Issue:** Field `Total_products` failed in 100% of cases. Financial fields like `Paid` and `Change` achieved only 28‚Äì35% accuracy.  
> *(L·ªói nghi√™m tr·ªçng: Tr∆∞·ªùng ‚ÄúT·ªïng ti·ªÅn s·∫£n ph·∫©m‚Äù th·∫•t b·∫°i ho√†n to√†n (100%), c√°c tr∆∞·ªùng t√†i ch√≠nh nh∆∞ ‚ÄúS·ªë ti·ªÅn thanh to√°n‚Äù v√† ‚ÄúTi·ªÅn th·ªëi‚Äù ch·ªâ ƒë·∫°t 28‚Äì35%.)*  

---

## üñ•Ô∏è User Interface *(Giao di·ªán h·ªá th·ªëng)*  

The system is implemented as a lightweight **Flask Web App**.  
*(H·ªá th·ªëng ƒë∆∞·ª£c tri·ªÉn khai d∆∞·ªõi d·∫°ng ·ª©ng d·ª•ng web ƒë∆°n gi·∫£n b·∫±ng Flask.)*  

- **Upload Function:** Users can upload invoice images directly.  
  *(Ch·ª©c nƒÉng t·∫£i ·∫£nh h√≥a ƒë∆°n tr·ª±c ti·∫øp l√™n giao di·ªán.)*  

![Upload Interface](code_project/static/img/upload.png)  

- **Result Display:** Extracted information is shown clearly and organized.  
  *(Hi·ªÉn th·ªã k·∫øt qu·∫£ tr√≠ch xu·∫•t d∆∞·ªõi d·∫°ng b·∫£ng r√µ r√†ng v√† c√≥ c·∫•u tr√∫c.)*  

![Result Interface](code_project/static/img/result1.png)  
![Result Interface](code_project/static/img/result2.png)  

- **Error Highlighting:** Missing fields are shown in **red**.  
  *(C√°c tr∆∞·ªùng thi·∫øu ƒë∆∞·ª£c ƒë√°nh d·∫•u ƒë·ªè ƒë·ªÉ d·ªÖ ki·ªÉm tra.)*  

- **Auto Save:** Results are automatically stored in `results.csv` for further analysis.  
  *(K·∫øt qu·∫£ ƒë∆∞·ª£c t·ª± ƒë·ªông l∆∞u v√†o file `results.csv` ph·ª•c v·ª• ph√¢n t√≠ch sau.)*  

---

## üöÄ Conclusion & Future Work *(K·∫øt lu·∫≠n & H∆∞·ªõng ph√°t tri·ªÉn)*  

### Conclusion *(K·∫øt lu·∫≠n)*  
The system successfully automates the invoice recognition process, achieving 75‚Äì85% accuracy on high-quality images.  
*(H·ªá th·ªëng t·ª± ƒë·ªông h√≥a th√†nh c√¥ng quy tr√¨nh nh·∫≠n di·ªán h√≥a ƒë∆°n, ƒë·∫°t ƒë·ªô ch√≠nh x√°c 75‚Äì85% v·ªõi ·∫£nh ch·∫•t l∆∞·ª£ng t·ªët.)*  

However, OCR accuracy on financial fields and low-quality images remains limited.  
*(Tuy nhi√™n, h·ªá th·ªëng c√≤n y·∫øu ·ªü c√°c tr∆∞·ªùng t√†i ch√≠nh v√† ·∫£nh m·ªù, nhi·ªÖu.)*  

### Future Work *(H∆∞·ªõng ph√°t tri·ªÉn)*  
1. Expand dataset with various invoice formats. *(M·ªü r·ªông t·∫≠p d·ªØ li·ªáu v·ªõi nhi·ªÅu lo·∫°i h√≥a ƒë∆°n h∆°n.)*  
2. Apply deep learning models (CRNN, CTPN, Vision-Language). *(√Åp d·ª•ng m√¥ h√¨nh h·ªçc s√¢u ƒë·ªÉ n√¢ng cao ƒë·ªô ch√≠nh x√°c.)*  
3. Improve preprocessing pipeline. *(C·∫£i thi·ªán thu·∫≠t to√°n ti·ªÅn x·ª≠ l√Ω ·∫£nh.)*  
4. Add manual correction on web interface. *(Th√™m ch·ª©c nƒÉng ch·ªânh s·ª≠a th·ªß c√¥ng tr√™n giao di·ªán web.)*  

---

## ‚öôÔ∏è Installation *(C√†i ƒë·∫∑t)*  

> *(Ph·∫ßn n√†y b·∫°n s·∫Ω t·ª± vi·∫øt h∆∞·ªõng d·∫´n thi·∫øt l·∫≠p m√¥i tr∆∞·ªùng v√† ch·∫°y project t·∫°i ƒë√¢y.)*

---

## üë• Project Information *(Th√¥ng tin ƒê·ªì √°n)*  

This project was developed as part of the **Fundamental Project (ƒê·ªì √°n C∆° s·ªü)** ‚Äì Semester 1, Academic Year 2024‚Äì2025.  
*(ƒê√¢y l√† s·∫£n ph·∫©m c·ªßa ƒê·ªì √°n C∆° s·ªü ‚Äì H·ªçc k·ª≥ 1, nƒÉm h·ªçc 2024‚Äì2025.)*  

**Students:**  
- H·ªì Gia Th√†nh  
- Hu·ª≥nh Th√°i Linh  
- Tr∆∞∆°ng Minh Khoa  

**Class:** `22DKHA1` ‚Äì *Data Science Major (Khoa h·ªçc D·ªØ li·ªáu)*  
**Instructor:** MSc. Nguy·ªÖn Quang Ph√∫c  
**University:** HUTECH ‚Äì Ho Chi Minh City University of Technology (2025)  
